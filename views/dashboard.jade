doctype html
html
  head
    title Welcome back, 
    // Viewport mobile tag for sensible mobile support
    meta(name='viewport', content='width=device-width, initial-scale=1, maximum-scale=1')
    // STYLES
    link(rel="stylesheet", href="/styles/angular-toastr.css")
    link(rel="stylesheet", href="/styles/bootstrap.3.1.1.css")
    link(rel="stylesheet", href="/styles/custom.css")
    link(rel="stylesheet", href="/styles/importer.css")
    // STYLES END
    // Added this so the client has access to the csrf tag and it's grabbed first service side on every page
    script(type='text/javascript').
      window.SAILS_LOCALS = {
      _csrf: '#{ _csrf }',
      me: !{ JSON.stringify(me) }
      };
  body(ng-app='DashboardModule', ng-controller='DashboardController', ng-cloak='')
    // container = Fixed-width container container-fluid = full-width
    .container-fluid
      // Creates the navbar
      nav.navbar.navbar-default.navbar-inverse
        // This creates the mechanism for collapse button
        button.navbar-toggle(type='button', data-toggle='collapse', ng-init='navCollapsed = true', ng-click='navCollapsed = !navCollapsed')
          // This controls the number of lines in the image when the nav collapse
          span.icon-bar
          span.icon-bar
          span.icon-bar
        // This is the brand on the left-hand side.
        a.navbar-brand(href='/#/')  activityOverlord
        // This is what is the above collapse button points to when the mark-up below is collapsed
        .collapse.navbar-collapse(ng-class="!navCollapsed && 'in'")
          // This is what "styles" the li's as navbar items
          ul.nav.navbar-nav.navbar-right
            // navbar-right pulls this element right
            //
              Using ng-show instead of ng-if because we need this mark-up to be in the dom when signup controller
              fires.  If it's not there (which it wouldn't be in the case of ng-if) then the scope of the signup
              controller will not be tied to this element.
            li
              a(href='/logout') sign-out
            // <a ng-controller="signinController" class="btn btn-default navbar-btn navbar-right" href="#" ng-if="!isAuthenticated">sign-in</a>
            //
              Using ng-show instead of ng-if because we need this mark-up to be in the dom when signup controller
              fires.  If it's not there (which it wouldn't be in the case of ng-if) then the scope of the signup
              controller will not be tied to this element.
      h1 This is the Dashboard
      h1  
      hr
      h3  Contact: #{ me.email }
      button.btn.btn-primary(href="/user/edit/#{ me.id }") Edit
      hr
      b globals:
      hr 
      span _csrf: #{ _csrf }
      span  me: !{ JSON.stringify(me) }
      
    // SCRIPTS
    script(src="/js/dependencies/sails.io.js")
    script(src="/js/dependencies/jquery-1.11.2.min.js")
    script(src="/js/dependencies/jquery-ui-1.11.2.min.js")
    script(src="/js/dependencies/bootstrap.min.js")
    script(src="/js/dependencies/angular.1.3.js")
    script(src="/js/dependencies/angular-toastr.js")
    script(src="/js/dependencies/compareTo.module.js")
    script(src="/js/public/signup/SignupModule.js")
    script(src="/js/public/homepage/HomepageModule.js")
    script(src="/js/public/homepage/HomepageController.js")
    script(src="/js/public/signup/SignupController.js")
    // SCRIPTS END
