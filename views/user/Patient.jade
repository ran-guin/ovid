extends ./../layout
block content
 div(style="margin-top:50px") 
  div.alert.alert-info Home Page

  .container
    div(ng-app="myApp")

      - var url = session.url
      - var config = {User: User, clinic: clinic, patient: patient, schedule : schedule, protectionMap : protectionMap, appointment:appointment, treatments:treatments, token:token };
      - var init = "initialize(" + JSON.stringify(config) + ")";

      div(ng-controller="Nto1Controller")
        div(ng-controller="CommonController")
          div(ng-controller="UserController" ng-init="#{init}")

          div#topMessage

          if User
            <!-- Nav tabs -->
            ul.nav.nav-tabs(role="tablist")
              li(role="presentation")
                a(href="#profile" aria-controls="profile" role="tab" data-toggle="tab") Profile
              li.active(role="presentation")
                a(href="#Protection" aria-controls="Protection" role="tab" data-toggle="tab") Protection
              li(role="scheduled")
                a(href="#scheduled" aria-controls="scheduled" role="tab" data-toggle="tab") Required

            <!-- Tab panes -->
            div.tab-content
              div.tab-pane#profile(role="tabpanel")
                p &nbsp;
                h3 Profile:
                table.table
                  tr
                      td Name
                      td {{ patient.name }}
                  tr 
                    td Email
                    td {{ patient.email }}
                hr


              div.tab-pane.active#Protection(role="tabpanel")
                p &nbsp;
                h3 Current Protection:
                include Current_Immunization.jade

              div.tab-pane#scheduled(role="tabpanel")
                include Pending_Immunization.jade

          if ! User
            h3 no User defined... 

            div.alert.alert-danger #{JSON.stringify(User)}
          include ./../debugDump.jade


